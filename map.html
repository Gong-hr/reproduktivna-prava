<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OpenDataDay2019 Hackathon</title>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/MarkerCluster.css"/>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.4.1/leaflet.markercluster.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Lora|Ubuntu+Mono" rel="stylesheet">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <style>
	h1{ font-size: 1.75em; }
    #map{ width: 100%; height: 500px; }
	:root { font-size: 18px; font-family: 'Lora', serif; padding-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
  <div id="map"></div>

  <script>
  // initialize the map
  var map = L.map('map').setView([44.67, 15.92], 7);

  // load a tile layer
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
    {
      maxZoom: 20,
      minZoom: 2
    }).addTo(map);

	//polygons

	$.getJSON("/maps/grad-zagreb.geojson",function(hoodData){
	   L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 400 ) fillColor = "#006837";
	      else if ( density > 300 ) fillColor = "#31a354";
	      else if ( density > 200 ) fillColor = "#78c679";
	      else if ( density > 100 ) fillColor = "#c2e699";
	      else if ( density > 1 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});


	$.getJSON("/maps/krapinsko-zagorska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 400 ) fillColor = "#006837";
	      else if ( density > 300 ) fillColor = "#31a354";
	      else if ( density > 200 ) fillColor = "#78c679";
	      else if ( density > 100 ) fillColor = "#c2e699";
	      else if ( density > 1 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});


	$.getJSON("/maps/primorsko-goranska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 400 ) fillColor = "#006837";
	      else if ( density > 300 ) fillColor = "#31a354";
	      else if ( density > 200 ) fillColor = "#78c679";
	      else if ( density > 100 ) fillColor = "#c2e699";
	      else if ( density > 1 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	
	
	$.getJSON("/maps/bjelovarsko-bilogorska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});

	$.getJSON("/maps/brodsko-posavska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});


	$.getJSON("/maps/dubrovacko-neretvanska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});	
	
	$.getJSON("/maps/istarska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 760 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});

	$.getJSON("/maps/karlovacka.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});


	$.getJSON("/maps/koprivnicko-krizevacka.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});


	$.getJSON("/maps/licko-senjska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});

	$.getJSON("/maps/medimurska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	
	$.getJSON("/maps/osjecko-baranjska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	
	$.getJSON("/maps/pozesko-slavonska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	
	$.getJSON("/maps/sisacko-moslavacka.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	
	

	$.getJSON("/maps/splitsko-dalmatinska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	
	$.getJSON("/maps/sibensko-kninska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});

	$.getJSON("/maps/varazdinska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	

	$.getJSON("/maps/viroviticko-podravska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	

	$.getJSON("/maps/vukovarsko-srijemska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	

	$.getJSON("/maps/zadarska.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});
	
	
	$.getJSON("/maps/zagrebacka.geojson",function(hoodData){
	  L.geoJson( hoodData  , {
	    style: function(feature){
	      var fillColor,
	          density = feature.properties.density;
	      if ( density > 80 ) fillColor = "#006837";
	      else if ( density > 750 ) fillColor = "#31a354";
	      else if ( density > 450 ) fillColor = "#78c679";
	      else if ( density > 250 ) fillColor = "#c2e699";
	      else if ( density > 92 ) fillColor = "#ffffcc";
	      else fillColor = "#f7f7f7";  // no data
	      return { color: "#999", weight: 1, fillColor: fillColor, fillOpacity: .6 };
	    },
	    onEachFeature: function( feature, layer ){
	      layer.bindPopup( "<strong>" + feature.properties.Name + "</strong><br/>" + feature.properties.density + " pobačaja" )
	    }
	  }  ).addTo(map);
	});

	// load GeoJSON from an external file
	  $.getJSON("map.geojson",function(data){
	    // add GeoJSON layer to the map once the file is loaded
	    var medicalIcon = L.icon({
		    iconUrl: 'med.svg',
		    iconSize: [30,30]
		  }); 
		  L.geoJson(data  ,{
		    pointToLayer: function(feature,latlng){
				var marker = L.marker(latlng,{icon: medicalIcon});
			  marker.bindPopup( "<strong>" + feature.properties.name + "</strong><br/>" + "Broj specijalista:&nbsp;" +  feature.properties.specijalisti  + "<br/>" + "Broj priziva:&nbsp;" +  feature.properties.prizivi + "<br/>" + "Cijena (opća anestezija):&nbsp;" +  feature.properties.cijena);
			  return marker;
		    }
		  }  ).addTo(map);
		});

  </script>
	</br>
</body>
</html>